{"version":3,"sources":["hooks/use-api.js","hooks/use-auth.js","components/username-password-form.js","context/app-context-provider.js","components/signup-page.js","hooks/use-query.js","components/login-page.js","components/flights-search-form.js","hooks/use-time-utils.js","components/flights-search-results.js","components/app-bar.js","components/main-page.js","components/flights-search-page.js","hooks/use-aircraft-types.js","components/seating-map.js","components/make-booking-page.js","components/my-bookings-page.js","App.js","index.js"],"names":["API_URL","FLIGHTS_API","USERS_API","BOOKINGS_API","useHttpRequest","url","method","useState","isInProgress","setInProgress","lastCallErrored","setLastCallErrored","go","finalUrl","data","params","pathParams","axios","then","response","catch","error","useAPI","createAccount","login","logout","flightSearch","flightBookingInfo","id","book","myBookings","cancelBooking","useAuth","useCookies","cookies","authToken","isLoggedIn","setLoggedIn","api","isLoggingIn","username","password","isLoggingOut","Copyright","Typography","variant","color","align","Link","href","dayjs","format","useStyles","makeStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","avatar","margin","backgroundColor","palette","secondary","main","form","width","submit","UsernamePasswordForm","onSubmit","buttonText","enabled","children","classes","setUsername","setPassword","history","useHistory","replace","Container","component","maxWidth","className","Avatar","event","preventDefault","TextField","required","fullWidth","label","name","autoFocus","value","onChange","e","target","type","autoComplete","Button","disabled","Box","mt","AppContext","React","createContext","useAppContext","useContext","AppContextProvider","auth","flights","setFlights","origin","destination","searchByDate","departureDate","context","searchQuery","setSearchQuery","Provider","SignupPage","enqueueSnackbar","useSnackbar","Helmet","push","status","console","log","useQuery","location","useLocation","URLSearchParams","search","LoginPage","query","from","get","decodeURIComponent","Grid","container","item","xs","RRLink","to","grid","marginBottom","FlightsSearchForm","onSearch","updateSearchQuery","sm","helperText","setOrigin","setDestination","FormControlLabel","control","Switch","checked","setSearchByDate","DatePicker","inputVariant","date","justifyContent","getTime","airport","timeString","substring","indexOf","tz","timeZone","useTimeUtils","table","minWidth","FlightsSearchResults","onBook","hideBookButton","TableContainer","Paper","Table","TableHead","TableRow","TableCell","TableBody","map","flight","SingleResult","departureTime","code","arrivalTime","aircraftName","onClick","plane","marginRight","title","flexGrow","textDecoration","bookButton","MyAppBar","AppBar","position","Toolbar","LocalAirport","MainPage","requiresAuth","encodeURIComponent","pathname","header","FlightsSearchPage","gutterBottom","length","LinearProgress","Divider","SeatingZone","cabinClass","numRows","startingRowNumber","seatCodeData","graphicsData","this","getCapacity","isValidSeatCode","seatCode","rowNumber","parseInt","letter","validRow","validColumn","includes","allSeatCodes","getSeatCodes","row","col","charAt","seatCoords","getSeatCoords","rowIndex","colIndex","seatCodes","columnXOffsets","firstRowYOffset","rowSpacing","columnYOffsets","y","x","AircraftType","seatingZones","getTotalSeatingCapacity","capacity","zone","getCabinClass","AIRCRAFT_TYPES","imageName","height","root","img","top","left","zIndex","seatButton","SEAT_RADIUS","borderRadius","transition","SeatingMap","aircraft","bookedSeats","selectedSeats","onSeatClick","elevation","style","src","SeatDivs","coords","index","undefined","sticky","MakeBookingPage","bookingInfo","setBookingInfo","flightId","find","f","setSelectedSeats","cost","seat","pricingInfo","useEffect","filter","s","FlightSummary","YourBooking","yourBooking","onBookClick","bookingRequest","requestedSeats","remaining","Card","CardContent","join","CardActions","MyBookingsPage","resetFlag","setResetFlag","bookings","setBookings","handleCancel","booking","b","SingleBooking","onCancel","totalCost","App","path","extend","utc","timezone","themeLight","createTheme","background","default","ReactDOM","render","ThemeProvider","CssBaseline","utils","DateFnsUtils","CookiesProvider","maxSnack","document","getElementById"],"mappings":"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","file":"static/js/main.323e8834.chunk.js","sourcesContent":["import axios from 'axios';\r\nimport { useState } from 'react';\r\n\r\nconst API_URL = '/services';\r\nconst FLIGHTS_API = `${API_URL}/flights`;\r\nconst USERS_API = `${API_URL}/users`;\r\nconst BOOKINGS_API = `${API_URL}/bookings`;\r\n\r\nfunction useHttpRequest(url, method = 'get') {\r\n\r\n    const [isInProgress, setInProgress] = useState(false);\r\n    const [lastCallErrored, setLastCallErrored] = useState(false);\r\n\r\n    function go({ data, params, pathParams } = {}) {\r\n\r\n        let finalUrl;\r\n        if (typeof (url) === 'function') {\r\n            finalUrl = url(pathParams);\r\n        }\r\n        else {\r\n            finalUrl = url;\r\n        }\r\n\r\n        setInProgress(true);\r\n        setLastCallErrored(false);\r\n        return axios({ url: finalUrl, method, data, params })\r\n            .then(response => {\r\n                setInProgress(false);\r\n                return response;\r\n            })\r\n            .catch(error => {\r\n                setInProgress(false);\r\n                setLastCallErrored(true);\r\n                throw error;\r\n            });\r\n    }\r\n\r\n    return { isInProgress, lastCallErrored, go }\r\n}\r\n\r\nexport default function useAPI() {\r\n    return {\r\n        createAccount: useHttpRequest(USERS_API, 'post'),\r\n        login: useHttpRequest(`${USERS_API}/login`, 'post'),\r\n        logout: useHttpRequest(`${USERS_API}/logout`, 'get'),\r\n\r\n        flightSearch: useHttpRequest(FLIGHTS_API, 'get'),\r\n        flightBookingInfo: useHttpRequest(({ id }) => `${FLIGHTS_API}/${id}/booking-info`, 'get'),\r\n\r\n        book: useHttpRequest(BOOKINGS_API, 'post'),\r\n        myBookings: useHttpRequest(BOOKINGS_API, 'get'),\r\n        cancelBooking: useHttpRequest(({ id }) => `${BOOKINGS_API}/${id}`, 'delete')\r\n    };\r\n}","import { useState } from 'react';\r\nimport { useCookies } from \"react-cookie\";\r\nimport useAPI from \"./use-api\";\r\n\r\nexport default function useAuth() {\r\n\r\n    const [cookies] = useCookies(['authToken']);\r\n    const [isLoggedIn, setLoggedIn] = useState(cookies.authToken ? true : false);\r\n    const api = useAPI();\r\n\r\n    const isLoggingIn = api.login.isInProgress;\r\n    const login = (username, password) => {\r\n        return api.login.go({ data: { username, password } })\r\n            .then(() => setLoggedIn(true));\r\n    }\r\n\r\n    const isLoggingOut = api.logout.isInProgress;\r\n    const logout = () => {\r\n        return api.logout.go()\r\n            .then(() => setLoggedIn(false));\r\n    }\r\n\r\n    return { isLoggedIn, isLoggingIn, login, isLoggingOut, logout };\r\n}","import { useState } from 'react';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Box from '@material-ui/core/Box';\r\nimport Link from '@material-ui/core/Link';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\nimport dayjs from 'dayjs';\r\nimport useAuth from '../hooks/use-auth';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\n/**\r\n * A quick copyright component, displays at the bottom of the sign-in page\r\n */\r\nfunction Copyright() {\r\n    return (\r\n        <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n            {'Copyright © '}\r\n            <Link color=\"inherit\" href=\"https://canvas.auckland.ac.nz/courses/62448\">\r\n                SOFTENG 325 S2 2021,\r\n            </Link>{' '}\r\n            {dayjs().format('MMMM D, YYYY')}\r\n            {'.'}\r\n        </Typography>\r\n    );\r\n}\r\n\r\n/**\r\n * Custom styles for sign-in page\r\n */\r\nconst useStyles = makeStyles((theme) => ({\r\n    paper: {\r\n        marginTop: theme.spacing(8),\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n    },\r\n    avatar: {\r\n        margin: theme.spacing(1),\r\n        backgroundColor: theme.palette.secondary.main,\r\n    },\r\n    form: {\r\n        width: '100%', // Fix IE 11 issue.\r\n        marginTop: theme.spacing(1),\r\n    },\r\n    submit: {\r\n        margin: theme.spacing(3, 0, 2),\r\n    },\r\n}));\r\n\r\n/**\r\n * The common username / password entry form that's common to both the login and signup pages.\r\n */\r\nexport default function UsernamePasswordForm({ onSubmit, buttonText, enabled, children }) {\r\n\r\n    const classes = useStyles();\r\n    const [username, setUsername] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const history = useHistory();\r\n    const { isLoggedIn } = useAuth();\r\n\r\n    if (isLoggedIn) {\r\n        history.replace(\"/\");\r\n    }\r\n\r\n    function handleSubmit(event) {\r\n        event.preventDefault();\r\n        onSubmit && onSubmit(username, password);\r\n    }\r\n\r\n    return (\r\n        <Container component=\"main\" maxWidth=\"xs\">\r\n            <div className={classes.paper}>\r\n                <Avatar className={classes.avatar}>\r\n                    <LockOutlinedIcon />\r\n                </Avatar>\r\n                <Typography component=\"h1\" variant=\"h5\">\r\n                    {buttonText}\r\n                </Typography>\r\n                <form className={classes.form} onSubmit={handleSubmit}>\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        margin=\"normal\"\r\n                        required\r\n                        fullWidth\r\n                        id=\"username\"\r\n                        label=\"Username\"\r\n                        name=\"username\"\r\n                        autoFocus\r\n                        value={username}\r\n                        onChange={e => setUsername(e.target.value)}\r\n                    />\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        margin=\"normal\"\r\n                        required\r\n                        fullWidth\r\n                        name=\"password\"\r\n                        label=\"Password\"\r\n                        type=\"password\"\r\n                        id=\"password\"\r\n                        autoComplete=\"current-password\"\r\n                        value={password}\r\n                        onChange={e => setPassword(e.target.value)}\r\n                    />\r\n                    <Button\r\n                        type=\"submit\"\r\n                        fullWidth\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        className={classes.submit}\r\n                        disabled={!enabled}\r\n                    >\r\n                        {buttonText}\r\n                    </Button>\r\n                    {children}\r\n                </form>\r\n            </div>\r\n            <Box mt={8}>\r\n                <Copyright />\r\n            </Box>\r\n        </Container>\r\n    );\r\n}","import dayjs from 'dayjs';\r\nimport React, { useContext, useState } from 'react';\r\nimport useAPI from '../hooks/use-api';\r\nimport useAuth from '../hooks/use-auth';\r\n\r\nconst AppContext = React.createContext({});\r\n\r\nexport function useAppContext() {\r\n    return useContext(AppContext);\r\n}\r\n\r\nexport function AppContextProvider({ children }) {\r\n\r\n    const auth = useAuth();\r\n    const api = useAPI();\r\n\r\n    // Flights and search query info is stored in app context so that if we navigate away from the\r\n    // flights search page, the info will still be there when we go back.\r\n    const [flights, setFlights] = useState([]);\r\n    const [searchQuery, setSearchQuery] = useState({\r\n        origin: 'Auckland',\r\n        destination: 'Sydney',\r\n        searchByDate: false,\r\n        departureDate: dayjs().format('YYYY-MM-DD')\r\n    });\r\n\r\n    const context = {\r\n        auth,\r\n        api,\r\n        flights,\r\n        setFlights,\r\n        searchQuery,\r\n        setSearchQuery\r\n    };\r\n\r\n    return (\r\n        <AppContext.Provider value={context}>\r\n            {children}\r\n        </AppContext.Provider>\r\n    )\r\n}","import { useHistory } from 'react-router';\r\nimport { useSnackbar } from 'notistack';\r\nimport UsernamePasswordForm from './username-password-form';\r\nimport { Helmet } from 'react-helmet';\r\nimport { useAppContext } from '../context/app-context-provider';\r\n\r\nexport default function SignupPage() {\r\n\r\n    const { api } = useAppContext();\r\n    const { createAccount } = api;\r\n    const history = useHistory();\r\n    const { enqueueSnackbar } = useSnackbar();\r\n\r\n    function handleSubmit(username, password) {\r\n        createAccount.go({ username, password })\r\n            .then(() => {\r\n                enqueueSnackbar('Account creation successful! You can now login', { variant: 'success' });\r\n                history.push('/login');\r\n            })\r\n            .catch(error => {\r\n                if (error.response && error.response.status === 409) {\r\n                    enqueueSnackbar('That username already exists', { variant: 'error' });\r\n                }\r\n                else {\r\n                    console.log(error);\r\n                    enqueueSnackbar('Something unexpected went wrong!', { variant: 'error' });\r\n                }\r\n            });\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Helmet>\r\n                <title>SE325 Flight Booker - Sign up</title>\r\n            </Helmet>\r\n            <UsernamePasswordForm buttonText=\"Create an account\" onSubmit={handleSubmit} enabled={!createAccount.isInProgress} />\r\n        </>\r\n    )\r\n}","import { useLocation } from \"react-router\";\r\n\r\nexport default function useQuery() {\r\n    const location = useLocation();\r\n    return new URLSearchParams(location.search);\r\n}","import Link from '@material-ui/core/Link';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { Link as RRLink, useHistory } from 'react-router-dom';\r\nimport useQuery from '../hooks/use-query';\r\nimport UsernamePasswordForm from './username-password-form';\r\nimport { useSnackbar } from 'notistack';\r\nimport { Helmet } from 'react-helmet';\r\nimport { useAppContext } from '../context/app-context-provider';\r\n\r\nexport default function LoginPage() {\r\n\r\n    const { auth } = useAppContext();\r\n    const { login, isLoggingIn } = auth;\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const history = useHistory();\r\n    const query = useQuery();\r\n\r\n    function handleSubmit(username, password) {\r\n        login(username, password)\r\n            .then(() => {\r\n                enqueueSnackbar('Logged in successfully!', { variant: 'success' });\r\n                const from = query.get('from');\r\n                if (from) {\r\n                    history.push(decodeURIComponent(from));\r\n                }\r\n                else {\r\n                    history.push('/');\r\n                }\r\n            })\r\n            .catch(error => {\r\n                if (error.response && error.response.status === 401) {\r\n                    enqueueSnackbar('That username or password was incorrect!', { variant: 'error' });\r\n                }\r\n                else {\r\n                    enqueueSnackbar('Something unexpected went wrong!', { variant: 'error' });\r\n                }\r\n            });\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Helmet>\r\n                <title>SE325 Flight Booker - Sign in</title>\r\n            </Helmet>\r\n            <UsernamePasswordForm buttonText=\"Sign in\" onSubmit={handleSubmit} enabled={!isLoggingIn}>\r\n                <Grid container>\r\n                    <Grid item xs />\r\n                    <Grid item>\r\n                        <Link variant=\"body2\" component={RRLink} to=\"/signup\">\r\n                            Don't have an account? Sign Up\r\n                    </Link>\r\n                    </Grid>\r\n                </Grid>\r\n            </UsernamePasswordForm>\r\n        </>\r\n    )\r\n}","import { Button, Container, FormControlLabel, Grid, makeStyles, Switch, TextField, Typography } from '@material-ui/core';\r\nimport { DatePicker } from '@material-ui/pickers';\r\nimport dayjs from 'dayjs';\r\nimport { useAppContext } from '../context/app-context-provider';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    grid: {\r\n        marginBottom: theme.spacing(2)\r\n    }\r\n}));\r\n\r\nexport default function FlightsSearchForm({ onSearch, enabled }) {\r\n\r\n    const classes = useStyles();\r\n    const { searchQuery, setSearchQuery } = useAppContext();\r\n    const { origin, destination, searchByDate, departureDate } = searchQuery;\r\n\r\n    function updateSearchQuery(query) {\r\n        setSearchQuery({ ...searchQuery, ...query });\r\n    }\r\n\r\n    const setOrigin = origin => updateSearchQuery({ origin });\r\n    const setDestination = destination => updateSearchQuery({ destination });\r\n    const setSearchByDate = searchByDate => updateSearchQuery({ searchByDate });\r\n    const setDepartureDate = date => updateSearchQuery({ departureDate: date.format('YYYY-MM-DD') });\r\n\r\n    function handleSubmit(event) {\r\n        event.preventDefault();\r\n        onSearch && onSearch(searchQuery);\r\n    }\r\n\r\n    return (\r\n        <Container maxWidth=\"md\" component=\"div\">\r\n            <form onSubmit={handleSubmit}>\r\n                <Grid container spacing={2} className={classes.grid}>\r\n\r\n                    <Grid item xs={12}>\r\n                        <Typography variant=\"subtitle1\">Where are you travelling?</Typography>\r\n                        <Grid container spacing={2}>\r\n                            <Grid item xs={12} sm={6}>\r\n                                <TextField\r\n                                    required\r\n                                    fullWidth\r\n                                    label=\"From\"\r\n                                    helperText=\"Airport or City\"\r\n                                    variant=\"outlined\"\r\n                                    value={origin}\r\n                                    onChange={e => setOrigin(e.target.value)} />\r\n                            </Grid>\r\n                            <Grid item xs={12} sm={6}>\r\n                                <TextField\r\n                                    required\r\n                                    fullWidth\r\n                                    label=\"To\"\r\n                                    helperText=\"Airport or City\"\r\n                                    variant=\"outlined\"\r\n                                    value={destination}\r\n                                    onChange={e => setDestination(e.target.value)} />\r\n                            </Grid>\r\n                        </Grid>\r\n                    </Grid>\r\n\r\n                    <Grid item xs={12}>\r\n                        <FormControlLabel\r\n                            control={<Switch\r\n                                checked={searchByDate}\r\n                                onChange={e => setSearchByDate(e.target.checked)}\r\n                                color=\"primary\" />}\r\n                            label=\"Search by departure date?\" />\r\n                    </Grid>\r\n\r\n\r\n                    {searchByDate &&\r\n                        <Grid item xs={12}>\r\n                            <Typography variant=\"subtitle1\">When would you like to leave?</Typography>\r\n                            <DatePicker\r\n                                fullWidth\r\n                                inputVariant=\"outlined\"\r\n                                value={dayjs(departureDate)}\r\n                                onChange={setDepartureDate} />\r\n                        </Grid>}\r\n\r\n                    <Grid item container xs={12} justifyContent=\"flex-end\">\r\n                        <Button\r\n                            type=\"submit\"\r\n                            color=\"primary\"\r\n                            variant=\"contained\"\r\n                            disabled={!enabled}>Search</Button>\r\n                    </Grid>\r\n                </Grid>\r\n            </form>\r\n        </Container>\r\n    );\r\n}","import dayjs from 'dayjs';\r\n\r\nfunction getTime(airport, timeString) {\r\n    const time = dayjs(timeString.substring(0, timeString.indexOf('['))).tz(airport.timeZone);\r\n    return time.format('MMM D, YYYY h:mm A ([UTC]Z)');\r\n}\r\n\r\nexport default function useTimeUtils() {\r\n    return { getTime };\r\n}","import { Paper, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, Button, makeStyles } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport dayjs from 'dayjs';\r\nimport useTimeUtils from '../hooks/use-time-utils';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    table: {\r\n        minWidth: 800\r\n    }\r\n}));\r\n\r\nexport default function FlightsSearchResults({ flights, onBook, hideBookButton }) {\r\n\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <TableContainer component={Paper}>\r\n            <Table className={classes.table}>\r\n                <TableHead>\r\n                    <TableRow>\r\n                        <TableCell>Name</TableCell>\r\n                        <TableCell />\r\n                        <TableCell>Departs</TableCell>\r\n                        <TableCell />\r\n                        <TableCell>Arrives</TableCell>\r\n                        <TableCell />\r\n                        <TableCell>Aircraft</TableCell>\r\n                        {!hideBookButton && <TableCell>Book</TableCell>}\r\n                    </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                    {flights.map(flight => (\r\n                        <SingleResult key={flight.id} flight={flight}\r\n                            onBook={onBook} hideBookButton={hideBookButton} />\r\n                    ))}\r\n                </TableBody>\r\n            </Table>\r\n        </TableContainer>\r\n    );\r\n}\r\n\r\nfunction SingleResult({ flight, onBook, hideBookButton }) {\r\n\r\n    const { getTime } = useTimeUtils();\r\n\r\n    return (\r\n        <TableRow>\r\n            <TableCell>{flight.name}</TableCell>\r\n            <TableCell>✈</TableCell>\r\n            <TableCell>\r\n                {getTime(flight.origin, flight.departureTime)}\r\n                <br />\r\n                From {flight.origin.name} ({flight.origin.code})\r\n            </TableCell>\r\n            <TableCell>✈</TableCell>\r\n            <TableCell>\r\n                {getTime(flight.destination, flight.arrivalTime)}\r\n                <br />\r\n                From {flight.destination.name} ({flight.destination.code})\r\n            </TableCell>\r\n            <TableCell>✈</TableCell>\r\n            <TableCell>{flight.aircraftName}</TableCell>\r\n            {!hideBookButton && <TableCell><Button variant=\"contained\" color=\"secondary\"\r\n                onClick={() => onBook(flight)}>Book</Button></TableCell>}\r\n        </TableRow>\r\n    );\r\n}","import { AppBar, Toolbar, Button, Typography } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { LocalAirport } from \"@material-ui/icons\";\r\nimport { useSnackbar } from 'notistack';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport { useAppContext } from '../context/app-context-provider';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    plane: {\r\n        marginRight: theme.spacing(2)\r\n    },\r\n    title: {\r\n        flexGrow: 1,\r\n        textDecoration: 'none'\r\n    },\r\n    bookButton: {\r\n        marginRight: theme.spacing(2)\r\n    }\r\n}));\r\n\r\nexport default function MyAppBar() {\r\n    const classes = useStyles();\r\n    const { auth } = useAppContext();\r\n    const { logout, isLoggedIn } = auth;\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const history = useHistory();\r\n\r\n    function handleSignOut() {\r\n        logout()\r\n            .then(() => {\r\n                enqueueSnackbar('Successfully logged out', { variant: 'success' });\r\n                history.push('/')\r\n            })\r\n            .catch(error => {\r\n                console.error(error);\r\n                enqueueSnackbar('Unknown error when logging out!', { variant: 'error' });\r\n            });\r\n    }\r\n\r\n    return (\r\n        <AppBar position=\"static\">\r\n            <Toolbar>\r\n                <LocalAirport color=\"inherit\" className={classes.plane} />\r\n                <Typography variant=\"h6\" color=\"inherit\" className={classes.title} component={Link} to=\"/\">\r\n                    SE325 Flight Booker\r\n                </Typography>\r\n                <Button color=\"inherit\" className={classes.bookButton} component={Link} to=\"/\">Search for flights</Button>\r\n                {isLoggedIn &&\r\n                    <Button color=\"inherit\" className={classes.bookButton} component={Link} to=\"/my-bookings\">My bookings</Button>}\r\n                {isLoggedIn ?\r\n                    <Button color=\"inherit\" onClick={handleSignOut}>Sign out</Button> :\r\n                    <Button color=\"inherit\" component={Link} to=\"/login\">Sign in</Button>}\r\n            </Toolbar>\r\n        </AppBar>\r\n    )\r\n}","import { Container } from \"@material-ui/core\";\r\nimport { useHistory, useLocation } from 'react-router-dom';\r\nimport { useAppContext } from \"../context/app-context-provider\";\r\nimport MyAppBar from \"./app-bar\";\r\n\r\n/**\r\n * Allows pages to easily wrap themselves with the app bar. Contains an option allowing the page\r\n * to auto-redirect to /login if authentication is required for this page.\r\n */\r\nexport default function MainPage({ children, requiresAuth }) {\r\n    const { auth } = useAppContext();\r\n    const { isLoggedIn } = auth;\r\n    const history = useHistory();\r\n    const location = useLocation();\r\n\r\n    // If we have to be logged in to view this page, but we aren't, get outta here.\r\n    if (!isLoggedIn && requiresAuth) {\r\n        const from = encodeURIComponent(`${location.pathname}${location.search}`);\r\n        history.replace(`/login?from=${from}`);\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <MyAppBar />\r\n            <Container maxWidth=\"lg\" component=\"main\">\r\n                {children}\r\n            </Container>\r\n        </>\r\n    )\r\n}","import { Divider, LinearProgress, makeStyles, Typography } from '@material-ui/core';\r\nimport { useAppContext } from '../context/app-context-provider';\r\nimport FlightsSearchForm from './flights-search-form';\r\nimport FlightsSearchResults from './flights-search-results';\r\nimport MainPage from './main-page';\r\nimport { useSnackbar } from 'notistack';\r\nimport { useHistory } from 'react-router';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    header: {\r\n        marginTop: theme.spacing(2)\r\n    }\r\n}));\r\n\r\nexport default function FlightsSearchPage() {\r\n\r\n    const classes = useStyles();\r\n    const { api, flights, setFlights } = useAppContext();\r\n    const { flightSearch } = api;\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const history = useHistory();\r\n\r\n    function handleSearch(searchQuery) {\r\n        const params = {\r\n            origin: searchQuery.origin,\r\n            destination: searchQuery.destination\r\n        }\r\n        if (searchQuery.searchByDate) {\r\n            params.departureDate = searchQuery.departureDate;\r\n        }\r\n\r\n        // Do the search\r\n        flightSearch.go({ params })\r\n            .then(response => {\r\n                enqueueSnackbar(`${response.data.length} flight(s) found!`, { variant: 'success' });\r\n                setFlights(response.data);\r\n            })\r\n            .catch(error => {\r\n                console.error(error);\r\n                enqueueSnackbar('Unexpected error occurred!', { variant: 'error' });\r\n            });\r\n    }\r\n\r\n    function handleBook(flight) {\r\n        history.push(`/book?flightId=${flight.id}`);\r\n    }\r\n\r\n    return (\r\n        <MainPage>\r\n            <Typography className={classes.header} variant=\"h3\" gutterBottom>Search for flights</Typography>\r\n            <FlightsSearchForm enabled={!flightSearch.isInProgress} onSearch={handleSearch} />\r\n            {flightSearch.isInProgress && <LinearProgress />}\r\n            <Divider />\r\n\r\n            <Typography className={classes.header} variant=\"h3\" gutterBottom>Search results</Typography>\r\n            {flights && flights.length > 0 ?\r\n                <div>\r\n                    <Typography variant=\"subtitle1\">✈ We found {flights.length} flights for you!</Typography>\r\n                    <FlightsSearchResults flights={flights} onBook={handleBook} />\r\n                </div> :\r\n                <Typography variant=\"subtitle1\">✈ Nothing yet. Use the form above to search for flights!</Typography>}\r\n        </MainPage>\r\n    )\r\n}","function SeatingZone({ cabinClass, numRows, startingRowNumber, seatCodeData, graphicsData }) {\r\n    this.cabinClass = cabinClass;\r\n    this.numRows = numRows;\r\n    this.startingRowNumber = startingRowNumber;\r\n    this.seatCodeData = seatCodeData;\r\n    this.graphicsData = graphicsData;\r\n\r\n    this.getCapacity = function () {\r\n        return this.numRows * this.seatCodeData.length;\r\n    }\r\n\r\n    this.isValidSeatCode = function (seatCode) {\r\n        const rowNumber = parseInt(seatCode.substring(0, seatCode.length - 1));\r\n        const letter = seatCode.substring(seatCode.length - 1);\r\n\r\n        const validRow = rowNumber >= this.startingRowNumber && rowNumber < this.startingRowNumber + this.numRows;\r\n        const validColumn = this.seatCodeData.includes(letter);\r\n        return validRow && validColumn;\r\n    }\r\n\r\n    this.allSeatCodes = null;\r\n    this.getSeatCodes = function () {\r\n        if (this.allSeatCodes === null) {\r\n            this.allSeatCodes = [];\r\n            for (let row = this.startingRowNumber; row < this.startingRowNumber + this.numRows; row++) {\r\n                for (let col = 0; col < this.seatCodeData.length; col++) {\r\n                    this.allSeatCodes.push(`${row}${this.seatCodeData.charAt(col)}`);\r\n                }\r\n            }\r\n        }\r\n        return this.allSeatCodes;\r\n    }\r\n\r\n    this.seatCoords = null;\r\n    this.getSeatCoords = function () {\r\n        if (this.seatCoords === null) {\r\n            this.seatCoords = [];\r\n            let rowIndex = 0;\r\n            let colIndex = 0;\r\n            const seatCodes = this.getSeatCodes();\r\n            const { columnXOffsets, firstRowYOffset, rowSpacing, columnYOffsets } = this.graphicsData;\r\n\r\n            for (const seatCode of seatCodes) {\r\n\r\n                const y = firstRowYOffset + rowIndex * rowSpacing + columnYOffsets[colIndex];\r\n                const x = columnXOffsets[colIndex];\r\n\r\n                this.seatCoords.push({ x, y, seatCode });\r\n\r\n                colIndex++;\r\n                if (colIndex === this.seatCodeData.length) {\r\n                    colIndex = 0;\r\n                    rowIndex++;\r\n                }\r\n            }\r\n        }\r\n        return this.seatCoords;\r\n    }\r\n}\r\n\r\nfunction AircraftType({ id, name, seatingZones, graphicsData }) {\r\n    this.id = id;\r\n    this.name = name;\r\n    this.seatingZones = seatingZones;\r\n    this.graphicsData = graphicsData;\r\n\r\n    this.getTotalSeatingCapacity = function (cabinClass = null) {\r\n        let capacity = 0;\r\n        for (const zone of this.seatingZones) {\r\n            if (!cabinClass || zone.cabinClass === cabinClass) {\r\n                capacity += zone.getCapacity();\r\n            }\r\n        }\r\n        return capacity;\r\n    }\r\n\r\n    this.getCabinClass = function (seatCode) {\r\n        for (const zone of this.seatingZones) {\r\n            if (zone.isValidSeatCode(seatCode)) {\r\n                return zone.cabinClass;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    this.seatCoords = null;\r\n    this.getSeatCoords = function() {\r\n        if (this.seatCoords === null) {\r\n            this.seatCoords = []\r\n            for (const zone of this.seatingZones) {\r\n                this.seatCoords.push(...zone.getSeatCoords());\r\n            }\r\n        }\r\n        return this.seatCoords;\r\n    }\r\n}\r\n\r\nconst AIRCRAFT_TYPES = {\r\n    '787-9 Dreamliner': new AircraftType({\r\n        id: 1,\r\n        name: '787-9 Dreamliner',\r\n        seatingZones: [\r\n            new SeatingZone({\r\n                cabinClass: 'Business',\r\n                numRows: 6,\r\n                startingRowNumber: 1,\r\n                seatCodeData: 'AJK',\r\n                graphicsData: {\r\n                    columnXOffsets: [141, 209, 279],\r\n                    firstRowYOffset: 300,\r\n                    rowSpacing: 34,\r\n                    columnYOffsets: [0, -6, 0]\r\n                }\r\n            }),\r\n            new SeatingZone({\r\n                cabinClass: 'Premium',\r\n                numRows: 3,\r\n                startingRowNumber: 23,\r\n                seatCodeData: 'ABDEFJK',\r\n                graphicsData: {\r\n                    columnXOffsets: [140, 159, 194, 213, 232, 264, 282],\r\n                    firstRowYOffset: 529,\r\n                    rowSpacing: 33,\r\n                    columnYOffsets: [0, 0, -3, -3, -3, 0, 0]\r\n                }\r\n            }),\r\n            new SeatingZone({\r\n                cabinClass: 'Economy',\r\n                numRows: 1,\r\n                startingRowNumber: 34,\r\n                seatCodeData: 'JK',\r\n                graphicsData: {\r\n                    columnXOffsets: [268, 282],\r\n                    firstRowYOffset: 724,\r\n                    rowSpacing: 0,\r\n                    columnYOffsets: [0, 0]\r\n                }\r\n            }),\r\n            new SeatingZone({\r\n                cabinClass: 'Economy',\r\n                numRows: 15,\r\n                startingRowNumber: 35,\r\n                seatCodeData: 'ABCDEFHJK',\r\n                graphicsData: {\r\n                    columnXOffsets: [140, 154, 168, 198, 212, 226, 254, 268, 282],\r\n                    firstRowYOffset: 747,\r\n                    rowSpacing: 22,\r\n                    columnYOffsets: [0, 0, 0, -7, -7, -7, 0, 0, 0]\r\n                }\r\n            }),\r\n            new SeatingZone({\r\n                cabinClass: 'Economy',\r\n                numRows: 2,\r\n                startingRowNumber: 50,\r\n                seatCodeData: 'ABCHJK',\r\n                graphicsData: {\r\n                    columnXOffsets: [140, 154, 168, 254, 268, 282],\r\n                    firstRowYOffset: 1163,\r\n                    rowSpacing: 22,\r\n                    columnYOffsets: [0, 0, 0, 0, 0, 0]\r\n                }\r\n            }),\r\n            new SeatingZone({\r\n                cabinClass: 'Economy',\r\n                numRows: 12,\r\n                startingRowNumber: 52,\r\n                seatCodeData: 'ABCDEFHJK',\r\n                graphicsData: {\r\n                    columnXOffsets: [140, 154, 168, 198, 212, 226, 254, 268, 282],\r\n                    firstRowYOffset: 1208,\r\n                    rowSpacing: 22,\r\n                    columnYOffsets: [0, 0, 0, -8, -8, -8, 0, 0, 0]\r\n                }\r\n            }),\r\n            new SeatingZone({\r\n                cabinClass: 'Economy',\r\n                numRows: 2,\r\n                startingRowNumber: 64,\r\n                seatCodeData: 'DEF',\r\n                graphicsData: {\r\n                    columnXOffsets: [198, 212, 226],\r\n                    firstRowYOffset: 1463,\r\n                    rowSpacing: 22,\r\n                    columnYOffsets: [0, 0, 0]\r\n                }\r\n            })\r\n        ],\r\n        graphicsData: {\r\n            imageName: 'Air_New_Zealand_Boeing_787-9.png',\r\n            width: 425,\r\n            height: 1890\r\n        }\r\n    }),\r\n\r\n    '777-200ER': new AircraftType({\r\n        id: 2,\r\n        name: '777-200ER',\r\n        seatingZones: [\r\n            new SeatingZone({\r\n                cabinClass: 'Business',\r\n                numRows: 2,\r\n                startingRowNumber: 11,\r\n                seatCodeData: 'ADFK',\r\n                graphicsData: {\r\n                    columnXOffsets: [185, 249, 282, 345],\r\n                    firstRowYOffset: 311,\r\n                    rowSpacing: 74,\r\n                    columnYOffsets: [0, 0, 0, 0]\r\n                }\r\n            }),\r\n            new SeatingZone({\r\n                cabinClass: 'Business',\r\n                numRows: 4,\r\n                startingRowNumber: 14,\r\n                seatCodeData: 'ADFK',\r\n                graphicsData: {\r\n                    columnXOffsets: [185, 249, 282, 345],\r\n                    firstRowYOffset: 459,\r\n                    rowSpacing: 74,\r\n                    columnYOffsets: [0, 0, 0, 0]\r\n                }\r\n            }),\r\n            new SeatingZone({\r\n                cabinClass: 'Business',\r\n                numRows: 1,\r\n                startingRowNumber: 18,\r\n                seatCodeData: 'DF',\r\n                graphicsData: {\r\n                    columnXOffsets: [249, 282],\r\n                    firstRowYOffset: 756,\r\n                    rowSpacing: 74,\r\n                    columnYOffsets: [0, 0]\r\n                }\r\n            }),\r\n            new SeatingZone({\r\n                cabinClass: 'Economy',\r\n                numRows: 16,\r\n                startingRowNumber: 31,\r\n                seatCodeData: 'ABCDEGHJK',\r\n                graphicsData: {\r\n                    columnXOffsets: [177, 192, 208, 249, 264, 280, 321, 337, 352],\r\n                    firstRowYOffset: 884,\r\n                    rowSpacing: 23,\r\n                    columnYOffsets: [0, 0, 0, 0, 0, 0, 0, 0, 0]\r\n                }\r\n            }),\r\n            new SeatingZone({\r\n                cabinClass: 'Economy',\r\n                numRows: 1,\r\n                startingRowNumber: 47,\r\n                seatCodeData: 'ACDEGHK',\r\n                graphicsData: {\r\n                    columnXOffsets: [177, 192, 249, 264, 280, 337, 352],\r\n                    firstRowYOffset: 1250,\r\n                    rowSpacing: 23,\r\n                    columnYOffsets: [0, 0, 0, 0, 0, 0, 0]\r\n                }\r\n            }),\r\n            new SeatingZone({\r\n                cabinClass: 'Economy',\r\n                numRows: 2,\r\n                startingRowNumber: 48,\r\n                seatCodeData: 'AC',\r\n                graphicsData: {\r\n                    columnXOffsets: [177, 192],\r\n                    firstRowYOffset: 1382,\r\n                    rowSpacing: 23,\r\n                    columnYOffsets: [0, 0]\r\n                }\r\n            }),\r\n            new SeatingZone({\r\n                cabinClass: 'Economy',\r\n                numRows: 10,\r\n                startingRowNumber: 50,\r\n                seatCodeData: 'ABCDEGHJK',\r\n                graphicsData: {\r\n                    columnXOffsets: [177, 192, 208, 249, 264, 280, 321, 337, 352],\r\n                    firstRowYOffset: 1429,\r\n                    rowSpacing: 23,\r\n                    columnYOffsets: [0, 0, 0, -5, -5, -5, 0, 0, 0]\r\n                }\r\n            })\r\n        ],\r\n        graphicsData: {\r\n            imageName: 'Singapore_Air_Boeing_777-200_ER_new.png',\r\n            width: 531,\r\n            height: 2094\r\n        }\r\n    })\r\n}\r\n\r\n/**\r\n * A hacky hook used to hardcode the aircraft type info client-side. This saves us from having to import\r\n * this from a server (and thus require it to be implemented by students).\r\n */\r\nexport default function useAircraftTypes() {\r\n    return AIRCRAFT_TYPES;\r\n}","import { makeStyles, Paper } from \"@material-ui/core\";\r\n\r\nconst SEAT_RADIUS = 10;\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        display: 'flex',\r\n        justifyContent: 'center'\r\n    },\r\n    container: {\r\n        position: 'relative'\r\n    },\r\n    img: {\r\n        position: 'absolute',\r\n        top: 0,\r\n        left: 0,\r\n        zIndex: 0\r\n    },\r\n    seatButton: {\r\n        position: 'absolute',\r\n        top: 0,\r\n        left: 0,\r\n        zIndex: 1,\r\n        width: SEAT_RADIUS * 2 + 1,\r\n        height: SEAT_RADIUS * 2 + 1,\r\n        borderRadius: SEAT_RADIUS,\r\n        backgroundColor: 'transparent',\r\n        transition: 'background-color 0.2s ease',\r\n        '&:hover': {\r\n            backgroundColor: 'rgba(0, 0, 255, 0.2)'\r\n        }\r\n    }\r\n}));\r\n\r\nexport default function SeatingMap({ aircraft, bookedSeats, selectedSeats, onSeatClick }) {\r\n\r\n    const classes = useStyles();\r\n    const { width, height, imageName } = aircraft.graphicsData;\r\n\r\n    return (\r\n\r\n        <Paper elevation={2}>\r\n            <div className={classes.root}>\r\n                <div className={classes.container} style={{ width, height }}>\r\n                    <img src={imageName} className={classes.img} />\r\n                    <SeatDivs\r\n                        aircraft={aircraft}\r\n                        classes={classes}\r\n                        onClick={onSeatClick}\r\n                        bookedSeats={bookedSeats}\r\n                        selectedSeats={selectedSeats} />\r\n                </div>\r\n            </div>\r\n        </Paper>\r\n    )\r\n}\r\n\r\nfunction SeatDivs({ aircraft, classes, onClick, bookedSeats, selectedSeats }) {\r\n\r\n    const seatCoords = aircraft.getSeatCoords();\r\n\r\n    return seatCoords.map((coords, index) => (\r\n        <div\r\n            key={index}\r\n            className={classes.seatButton}\r\n            onClick={event => {\r\n                if (!bookedSeats.includes(coords.seatCode)) {\r\n                    onClick(event, coords);\r\n                }\r\n            }}\r\n            style={{\r\n                top: coords.y - SEAT_RADIUS,\r\n                left: coords.x - SEAT_RADIUS,\r\n                backgroundColor: bookedSeats.includes(coords.seatCode) ? 'rgba(255, 0, 0, 0.5)' :\r\n                    selectedSeats.includes(coords.seatCode) ? 'rgba(0, 255, 0, 0.5)' : undefined\r\n            }} />\r\n    ));\r\n}","import { Box, Card, CardActions, CardContent, Button, Grid, LinearProgress, makeStyles, Paper, Table, TableBody, TableCell, TableRow, Typography } from '@material-ui/core';\r\nimport { useEffect, useState } from \"react\";\r\nimport { useAppContext } from '../context/app-context-provider';\r\nimport useAircraftTypes from '../hooks/use-aircraft-types';\r\nimport useAPI from \"../hooks/use-api\";\r\nimport useQuery from \"../hooks/use-query\";\r\nimport useTimeUtils from '../hooks/use-time-utils';\r\nimport FlightsSearchResults from './flights-search-results';\r\nimport MainPage from \"./main-page\";\r\nimport SeatingMap from './seating-map';\r\nimport { useSnackbar } from 'notistack';\r\nimport { useHistory } from 'react-router';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    header: {\r\n        marginTop: theme.spacing(2)\r\n    },\r\n    sticky: {\r\n        position: 'sticky',\r\n        top: theme.spacing(2)\r\n    }\r\n}));\r\n\r\nexport default function MakeBookingPage() {\r\n\r\n    // Read in all the stuff\r\n    const classes = useStyles();\r\n\r\n    const { flightBookingInfo, book } = useAPI();\r\n    const [bookingInfo, setBookingInfo] = useState(null);\r\n\r\n    const query = useQuery();\r\n    const flightId = parseInt(query.get('flightId'));\r\n\r\n    const { flights } = useAppContext();\r\n    const flight = flights.find(f => f.id === flightId);\r\n\r\n    const aircraftTypes = useAircraftTypes();\r\n    const aircraft = aircraftTypes[flight.aircraftName];\r\n\r\n    const [selectedSeats, setSelectedSeats] = useState([]);\r\n\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const history = useHistory();\r\n\r\n    // Calculate cost of booking\r\n    let cost = 0;\r\n    if (bookingInfo) {\r\n        for (const seat of selectedSeats) {\r\n            const cabinClass = aircraft.getCabinClass(seat);\r\n            cost += bookingInfo.pricingInfo[cabinClass];\r\n        }\r\n    }\r\n\r\n\r\n    // Wrapping GET request in useEffect() so we can make sure it doesn't keep re-running\r\n    useEffect(() => {\r\n        flightBookingInfo.go({ pathParams: { id: flightId } })\r\n            .then(response => setBookingInfo(response.data))\r\n            .catch(error => console.error(error));\r\n    }, [flightId]);\r\n    // TODO Add to above - if 401 returned, display a \"you've been logged out\" message, and redirect\r\n    // back to /login\r\n    // TODO Make it so it doesn't try to update state if this component is already unmounted\r\n\r\n\r\n    // Adds or removes seats from the list of selected seats, when clicked\r\n    function handleSeatClick(event, coords) {\r\n        if (selectedSeats.includes(coords.seatCode)) {\r\n            setSelectedSeats(selectedSeats.filter(s => s !== coords.seatCode));\r\n        }\r\n        else {\r\n            setSelectedSeats([...selectedSeats, coords.seatCode]);\r\n        }\r\n    }\r\n\r\n\r\n    // Makes a booking\r\n    function handleBooking() {\r\n        const bookingRequest = {\r\n            flightId: flight.id,\r\n            requestedSeats: selectedSeats\r\n        }\r\n\r\n        book.go({ data: bookingRequest })\r\n            .then(response => {\r\n                enqueueSnackbar('Booking created!', { variant: 'success' });\r\n                history.push('/my-bookings')\r\n            })\r\n            .catch(error => {\r\n                // TODO something a bit better than this...\r\n                enqueueSnackbar('Something went wrong with your booking!', { variant: 'error' });\r\n            });\r\n    }\r\n\r\n    // Rendering\r\n    return (\r\n        <MainPage requiresAuth={true}>\r\n            <Grid container spacing={2}>\r\n                <Grid item xs={12}>\r\n                    <Typography variant=\"h3\" className={classes.header} gutterBottom>\r\n                        Booking for {flight.name}\r\n                    </Typography>\r\n                    <FlightsSearchResults flights={[flight]} hideBookButton={true} />\r\n                </Grid>\r\n\r\n                {(flightBookingInfo.isInProgress || !bookingInfo) ?\r\n                    <Grid item xs={12}>\r\n                        <Typography variant=\"h6\" gutterBottom>Loading...</Typography>\r\n                        <LinearProgress />\r\n                    </Grid> :\r\n                    <>\r\n                        <Grid item>\r\n                            <SeatingMap\r\n                                aircraft={aircraft}\r\n                                bookedSeats={bookingInfo.bookedSeats}\r\n                                selectedSeats={selectedSeats}\r\n                                onSeatClick={handleSeatClick} />\r\n                        </Grid>\r\n                        <Grid item xs>\r\n                            <div className={classes.sticky}>\r\n                                <FlightSummary\r\n                                    flight={flight}\r\n                                    aircraft={aircraft}\r\n                                    bookingInfo={bookingInfo} />\r\n                                <Box mt={2}>\r\n                                    <YourBooking\r\n                                        className={classes.yourBooking}\r\n                                        selectedSeats={selectedSeats}\r\n                                        cost={cost}\r\n                                        onBookClick={handleBooking} />\r\n                                </Box>\r\n                            </div>\r\n                        </Grid>\r\n                    </>}\r\n            </Grid>\r\n        </MainPage>\r\n    );\r\n}\r\n\r\nfunction FlightSummary({ flight, bookingInfo, aircraft }) {\r\n\r\n    const { getTime } = useTimeUtils();\r\n    const capacity = aircraft.getTotalSeatingCapacity();\r\n    const remaining = capacity - bookingInfo.bookedSeats.length;\r\n    return (\r\n        <Card>\r\n            <CardContent>\r\n                <Typography variant=\"h4\" gutterBottom>Flight summary</Typography>\r\n                <Typography variant=\"subtitle1\">Flight {flight.name} to {flight.destination.name} ({flight.destination.code})</Typography>\r\n                <Typography variant=\"body1\">\r\n                    Departs {flight.origin.name} on {getTime(flight.origin, flight.departureTime)}, arrives {getTime(flight.destination, flight.arrivalTime)}.\r\n                </Typography>\r\n                <Typography variant=\"body1\"><strong>Capacity:</strong> {capacity} seats ({remaining} remaining).</Typography>\r\n            </CardContent>\r\n        </Card>\r\n    );\r\n}\r\n\r\nfunction YourBooking({ selectedSeats, cost, onBookClick }) {\r\n    return (\r\n        <Card>\r\n            <CardContent>\r\n                <Typography variant=\"h4\" gutterBottom>Your booking</Typography>\r\n                <Typography variant=\"body1\"><strong>Your seats: {selectedSeats.join(', ')}</strong></Typography>\r\n                <Typography variant=\"body1\"><strong>Cost: ${cost}.00</strong></Typography>\r\n            </CardContent>\r\n            <CardActions>\r\n                <Button variant=\"contained\" color=\"secondary\" onClick={onBookClick}>Book it!</Button>\r\n            </CardActions>\r\n        </Card>\r\n    )\r\n}","import { Button, LinearProgress, makeStyles, Paper, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, Typography } from \"@material-ui/core\";\r\nimport { useEffect, useState } from \"react\";\r\nimport useAPI from \"../hooks/use-api\";\r\nimport useTimeUtils from \"../hooks/use-time-utils\";\r\nimport MainPage from \"./main-page\";\r\nimport { useSnackbar } from 'notistack';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    header: {\r\n        marginTop: theme.spacing(2)\r\n    },\r\n}));\r\n\r\nexport default function MyBookingsPage() {\r\n\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const classes = useStyles();\r\n    const { myBookings, cancelBooking } = useAPI();\r\n    const [resetFlag, setResetFlag] = useState(false);\r\n    const [bookings, setBookings] = useState([]);\r\n    console.log(bookings);\r\n\r\n    useEffect(() => {\r\n        myBookings.go()\r\n            .then(response => {\r\n                setBookings(response.data)\r\n            })\r\n    }, [resetFlag]);\r\n\r\n    function handleCancel(booking) {\r\n        cancelBooking.go({ pathParams: { id: booking.id } })\r\n            .then(() => {\r\n                enqueueSnackbar('Booking cancelled!', { variant: 'error' });\r\n                setResetFlag(!resetFlag);\r\n            })\r\n            .catch(error => {\r\n                console.error(error);\r\n                enqueueSnackbar('Unexpected error when cancelling!', { variant: 'error' });\r\n            });\r\n    }\r\n\r\n    return (\r\n        <MainPage requiresAuth={true}>\r\n            <Typography variant=\"h3\" className={classes.header} gutterBottom>My bookings</Typography>\r\n            {!bookings && <LinearProgress />}\r\n            {bookings && <TableContainer component={Paper}>\r\n                <Table>\r\n                    <TableHead>\r\n                        <TableRow>\r\n                            <TableCell>Flight</TableCell>\r\n                            <TableCell>Departs</TableCell>\r\n                            <TableCell>Arrives</TableCell>\r\n                            <TableCell>My seats</TableCell>\r\n                            <TableCell>Booking fee</TableCell>\r\n                            <TableCell>Cancel</TableCell>\r\n                        </TableRow>\r\n                    </TableHead>\r\n                    <TableBody>\r\n                        {bookings.map(b => <SingleBooking key={b.id} booking={b} onCancel={handleCancel} />)}\r\n                    </TableBody>\r\n                </Table>\r\n            </TableContainer>}\r\n        </MainPage>\r\n    )\r\n}\r\n\r\nfunction SingleBooking({ booking, onCancel }) {\r\n\r\n    const { getTime } = useTimeUtils();\r\n    const { flight, bookedSeats, totalCost } = booking;\r\n    const { origin, departureTime, destination, arrivalTime } = flight;\r\n\r\n    return (\r\n        <TableRow>\r\n            <TableCell>{flight.name}</TableCell>\r\n            <TableCell>\r\n                {getTime(origin, departureTime)}\r\n                <br />\r\n                From {origin.name} ({origin.code})\r\n            </TableCell>\r\n            <TableCell>\r\n                {getTime(destination, arrivalTime)}\r\n                <br />\r\n                From {destination.name} ({destination.code})\r\n            </TableCell>\r\n            <TableCell>{bookedSeats.join(', ')}</TableCell>\r\n            <TableCell>${totalCost}.00</TableCell>\r\n            <TableCell>\r\n                <Button variant=\"contained\" color=\"secondary\"\r\n                    onClick={() => onCancel(booking)}>Cancel</Button>\r\n            </TableCell>\r\n        </TableRow>\r\n    )\r\n}","import { Route, Switch } from 'react-router-dom';\r\nimport SignupPage from './components/signup-page';\r\nimport LoginPage from './components/login-page';\r\nimport { Helmet } from 'react-helmet';\r\nimport FlightsSearchPage from './components/flights-search-page';\r\nimport MakeBookingPage from './components/make-booking-page';\r\nimport MyBookingsPage from './components/my-bookings-page';\r\n\r\nfunction App() {\r\n\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <title>SE325 Flight Booker</title>\r\n      </Helmet>\r\n      <Switch>\r\n        <Route path=\"/login\">\r\n          <LoginPage />\r\n        </Route>\r\n        <Route path=\"/signup\">\r\n          <SignupPage />\r\n        </Route>\r\n        <Route path=\"/book\">\r\n          <MakeBookingPage />\r\n        </Route>\r\n        <Route path=\"/my-bookings\">\r\n          <MyBookingsPage />\r\n        </Route>\r\n        <Route path=\"*\">\r\n          <FlightsSearchPage />\r\n        </Route>\r\n      </Switch>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default App;\r\n","import './index.css';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\nimport { AppContextProvider } from './context/app-context-provider';\r\nimport { SnackbarProvider } from 'notistack';\r\nimport { CookiesProvider } from 'react-cookie';\r\nimport { MuiPickersUtilsProvider } from '@material-ui/pickers';\r\nimport DateFnsUtils from '@date-io/dayjs';\r\nimport { createTheme, CssBaseline, ThemeProvider } from '@material-ui/core';\r\nimport dayjs from 'dayjs';\r\nimport utc from 'dayjs/plugin/utc';\r\nimport timezone from 'dayjs/plugin/timezone';\r\n\r\ndayjs.extend(utc);\r\ndayjs.extend(timezone);\r\n\r\nconst themeLight = createTheme({\r\n  palette: {\r\n    background: {\r\n      default: '#FFFFFF'\r\n    }\r\n  }\r\n});\r\n\r\nReactDOM.render(\r\n  // <React.StrictMode>\r\n    <ThemeProvider theme={themeLight}>\r\n      <CssBaseline />\r\n      <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n        <CookiesProvider>\r\n          <SnackbarProvider maxSnack={1}>\r\n            <Router>\r\n              <AppContextProvider>\r\n                <App />\r\n              </AppContextProvider>\r\n            </Router>\r\n          </SnackbarProvider>\r\n        </CookiesProvider>\r\n      </MuiPickersUtilsProvider>\r\n    </ThemeProvider>,\r\n  // </React.StrictMode>,\r\n  document.getElementById('root')\r\n);"],"sourceRoot":""}